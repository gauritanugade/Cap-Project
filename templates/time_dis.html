{% extends "homepage.html" %}
{% block content %}
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatiible" content="IE=edge">
    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">
    <title>Add more field using bootstrap 5, jQuery & PHP</title>
    <link rel='stylesheet'
        href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.1/css/bootstrap.min.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style1.css">
    <style>
        .row {

            --bs-gutter-y: auto;
            margin-top: calc(var(--bs-gutter-y) * -1);
        }

        .col {
            width: 100%;
            max-width: 800px;
            background: rgb(0 0 0 / 66%);
            padding: 30px;
            margin: 0 250px;
            border-radius: 10px;
            box-shadow: inset -2px 2px 2px rgb(32, 30, 30);
            color: #ecf0f4;
        }

        .card-header {
            padding: .5rem 1rem;
            margin-bottom: 0;
            background-color: rgb(237 233 232 / 60%);
            border-bottom: 1px solid rgba(0, 0, 0, .125);
        }

        div {
            display: block;
        }

        body {
            margin: 0;
            font-family: var(--bs-body-font-family);
            font-size: var(--bs-body-font-size);
            font-weight: var(--bs-body-font-weight);
            line-height: var(--bs-body-line-height);
            text-align: var(--bs-body-text-align);
            -webkit-text-size-adjust: 100%;
            background-image: url('https://t4.ftcdn.net/jpg/02/44/29/99/360_F_244299930_81B2P2ji5D3BiUqG0FOq8EjuYao4kVVj.jpg');
            background-repeat: no-repeat;
            background-size: 1500px 900px;

        }
    </style>
</head>

<body>
    <div class="bg=dark">
        <div class="container">
            <div class="row my-4">
                <div class="col-lg-10 mx-auto">
                    <div class="col">
                        <div class="card-header">
                            <h2 class="text-center">Display Time Table</h2>
                        </div><br>
                        <form action='/displaytimetable' method="POST">
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="Examinationdrop" class="form-label">Examination Final Program
                                        for</label>
                                    <select id="Examinationdrop" class="form-select" name="Examsession_id">
                                        {% for j in joblist4 %}
                                        <OPTION value={{j[3]}}>{{j[0]}} {{j[1]}} {{j[2]}}</OPTION>
                                        {% endfor %}
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label for="facultyDrop" class="form-label">Faculty</label>
                                    <select id="facultyDrop" class="form-select" name="Faculty">
                                        <option value="" selected disabled></option>
                                        {% for i in joblist5 %}
                                        <OPTION value={{i[2]}}>{{i[0]}}</OPTION>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="year1" class="form-label">year</label>
                                    <select id="year1" class="form-select" name="Year"></select>
                                </div>



                                <div class="col-md-6">
                                    <label for="sem" class="form-label">semester</label>
                                    <select id="sem" class="form-select" name="Sem"></select>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary mt-5">Save</button>
                        </form>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script>
        facultyDrop.onchange = function () {
            faculty = this.value;
            console.log("faculty: ", faculty)

            var data = new FormData();
            data.append("faculty", (faculty));
            fetch("/Year", { method: "POST", body: data })
                .then(res => res.json())
                .then(duration => {
                    console.log("duration: ", duration);
                    while (year1.options.length) {
                        year1.options.remove(0);
                    }
                    for (var i = 1; i <= duration; i++) {
                        var option = document.createElement("OPTION");
                        option.innerHTML = i;
                        option.value = i;
                        year1.options.add(option);
                    }
                });
        }

        year1.onchange = function () {
            selYear = this.value;
            console.log("onchange year: ", selYear);

            var yearData = new FormData();
            yearData.append("year", selYear);

            fetch("/getSem", { method: "POST", body: yearData })
                .then(x => x.json())
                .then(sems => {
                    console.log("sems =", sems);
                    while (sem.options.length) {
                        sem.options.remove(0);
                    }
                    for (var i = 0; i < sems.length; i++) {
                        var op = document.createElement("OPTION")
                        op.innerHTML = sems[i];
                        op.value = sems[i];
                        sem.options.add(op);
                    }
                });

        }



    </script>
</body>

</html>
{% endblock %}
{%extends "homepage.html" %} 
{%block content%} 
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatiible" content="IE=edge">
    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">
    <title>Add more field using bootstrap 5, jQuery & PHP</title>
    <link rel='stylesheet'
        href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.1/css/bootstrap.min.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style1.css">
        <style>
            .row {
            
            --bs-gutter-y: auto;
            margin-top: calc(var(--bs-gutter-y) * -1);
            }
            .col {
                width: 100%;
                max-width: 450px;
                background: rgb(0 0 0 / 66%);
                padding: 30px;
                margin: inherit;
                border-radius: 10px;
                box-shadow: inset -2px 2px 2px rgb(32, 30, 30);
                color: #ecf0f4;
            }
            .card-header {
                padding: .5rem 1rem;
                margin-bottom: 0;
                background-color: rgb(237 233 232 / 60%);
                border-bottom: 1px solid rgba(0,0,0,.125);
            }

            div {
                display: block;
            }
            body {
                margin: 0;
                font-family: var(--bs-body-font-family);
                font-size: var(--bs-body-font-size);
                font-weight: var(--bs-body-font-weight);
                line-height: var(--bs-body-line-height);
                text-align: var(--bs-body-text-align);
                
                -webkit-text-size-adjust: 100%;
                
                background-image: url('https://t4.ftcdn.net/jpg/02/44/29/99/360_F_244299930_81B2P2ji5D3BiUqG0FOq8EjuYao4kVVj.jpg');
                background-repeat: no-repeat;
                background-size: 1500px 900px;
            }
           
            
        </style>

</head>

<body>
    <div class="bg=dark">
        <div class="container">
            <div class="row my-4">
                <div class="col-lg-10 mx-auto">
                    
                    <div class="col">
                        <div class="card-header">
                            <h4>Add Exam Session</h4>
                        </div><br>
                        <form action="/pattern" method="POST">
                            <div class="col-md-10">
                                <label for="faculty">Faculty</label>
                                <SELECT id="facultyDrop" name="Faculty" class="form-control">
                                    {% for j in joblist %}
                                    <OPTION value={{j[2]}}>{{j[0]}}</OPTION>
                                    {% endfor %}
                                </SELECT>
                              </div>
                              <div class="col-md-10">
                                <label for="year" class="form-label">Year</label>
                                <select id="year" name="Year" class="form-control" ></select>
                                </select>
                              </div>
                              <div class="col-md-10">
                              <label for="pattern" class="form-label">Pattern</label>
                                <input type="text" class="form-control" id="pattern" name="pattern" required>
                            </div>
                              
                              <div class="col-md-10">
                                <label for="internal_mark" class="form-label">Internal_Marks</label>
                                  <input type="text" class="form-control" id="internal_mark" name="internal_mark" placeholder="Enter internal_mark"  required>
                              </div>
                              <div class="col-md-10">
                                <label for="theory_mark" class="form-label">Theory_Marks</label>
                                  <input type="text" class="form-control" id="pattern" name="theory_mark"  placeholder="Enter theory_mark" required>
                              </div><br>
                              <div class="text-center">
                                <button type="submit" class="btn btn-primary m-3">Save</button>
                              </div>
                        </form>
                        <form action="/pattern_data">
                            <button type="submit" class="btn btn-primary m-3">Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script>
        facultyDrop.onchange = function () {
                    faculty = this.value;
                    console.log("faculty: ", faculty)

                    var data = new FormData();
                    data.append("faculty", (faculty));
                    fetch("/getYear", { method: "POST", body: data })
                        .then(res => res.json())
                        .then(duration => {
                            console.log("duration: ", duration);
                            while (year.options.length) {
                                year.options.remove(0);
                            }
                            for (var i = 1; i <= duration; i++) {
                                var option = document.createElement("OPTION");
                                option.innerHTML = i;
                                option.value = i;
                                year.options.add(option);
                            }
                        });
                }
                
    
    </script>
</body>
</html>
{% endblock %}
